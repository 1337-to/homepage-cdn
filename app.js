var newtime = Date.now()
// check page path
var path = window.location.pathname;
var html = `<div class="mobile-menu"></div>
<div class="top-bar">
<div class="container">
<div class="top-bar-left">
</div>
<ul class="top-bar-nav">
</ul>
</div>
</div>
<header>
<div class="container">
<a href="#" class="navbar-menu"><span></span><span></span><span></span></a>
<nav>
<ul class="main-navigation">
<li class="green"><a href="/processor/?path=/`+newtime+`/home/" title="Full Home Page">Full Home Page</a></li>
<li><a href="/processor/?path=/`+newtime+`/top-100" title="Top 100 Torrents">Top 100</a></li>
<li><a href="/processor/?path=/`+newtime+`/trending" title="Trending Torrents">Trending</a></li>
<li><a href="https://telegram.dog/joinchat/5PYMXpqIV2M4MDJh" title="Telegram">TG Group</a></li> 
<li><a href="https://telegram.dog/HashHackers" title="Telegram">TG Channel</a></li> 
</ul>
</nav>
</div>
</header>
<main class="container">
<div class="row">
<div class="col-8 col-push-2 page-content ">
<div class="logo"><a href="/processor/?path=/`+newtime+`/home/"><img alt="logo" src="https://cdn.jsdelivr.net/gh/1337-to/homepage-cdn@2.0/images/logo.svg"><img alt="logo" src="https://cdn.jsdelivr.net/gh/1337-to/homepage-cdn@2.0/images/logo-white-d.svg"></a></div>
<div class="search-box">
<form id="search-index-form" method="get" action="">
  <input type="search" placeholder="Search for torrents.." id="autocomplete" name="search" class="ui-autocomplete-input form-control">
  <button type="submit" class="btn btn-search"><i class="flaticon-search"></i><span>Search</span></button>
</form>
</div>
<div class="news">
<div class="box-info">
<div class="box-info-heading clearfix"><h1>Important Update</h1> <span class="box-info-right box-info-time"><i class="flaticon-time"></i>Today</span></div>
<div class="box-info-detail clearfix">
<p>This very website ran for 3 Years without any Ads and Servers were paid by the Proxy Maintainer from their pockets, and due to serious life issues, we cannot afford that anymore, that's why we had to introduce ads, We're extremely sorry for these ads but they are required to maintain Proxy Servers, Databases, CDN Cache etc.</p>
<p>-----------------------------------------</p>
<p>There are alot of other things we provide for Free, which sometimes have ads and sometimes do not have any ads at all. To Try those. Try Below Link.</p>
<p><img src="https://cdn-api-network.pages.dev/images/new-image.png" width="100px"></p>
<p>Visit <a href="1337x.hashhackers.com">1337x.hashhackers.com</a></p>
</div>
</div>
</div>
</div>
</div>
</main>
<ul class="search-categories">
<li>
<h3><a href="/processor/?path=/`+newtime+`/popular-movies" title="Movies"><span class="icon"><i class="flaticon-movies"></i></span>Movies </a></h3>
<a href="/processor/?path=/`+newtime+`/movie-library/1/" class="library">Library</a>
</li>
<li>
<h3><a href="/processor/?path=/`+newtime+`/popular-tv" title="Television"><span class="icon"><i class="flaticon-tv"></i></span>Television </a></h3>
<a href="/processor/?path=/`+newtime+`/series-library/a/1/" class="library">Library</a>
</li>
<li>
<h3><a href="/processor/?path=/`+newtime+`/popular-games" title="Games"><span class="icon"><i class="flaticon-games"></i></span>Games </a></h3>
</li>
<li>
<h3><a href="/processor/?path=/`+newtime+`/popular-music" title="Musics"><span class="icon"><i class="flaticon-music"></i></span>Music </a></h3>
</li>
<li>
<h3><a href="/processor/?path=/`+newtime+`/popular-apps" title="Applications"><span class="icon"><i class="flaticon-apps"></i></span>Applications </a></h3>
</li>
<li>
<h3><a href="/processor/?path=/`+newtime+`/cat/Anime/1/" title="Other"><span class="icon"><i class="flaticon-ninja-portrait"></i></span>Anime </a></h3>
</li>
<li>
<h3><a href="/processor/?path=/`+newtime+`/cat/Documentaries/1/" title="Documentries"><span class="icon"><i class="flaticon-documentary"></i></span>Documentaries </a></h3>
</li>
<li>
<h3><a href="/processor/?path=/`+newtime+`/popular-other" title="Other"><span class="icon"><i class="flaticon-other"></i></span>Other </a></h3>
</li>
<li>
<h3><a href="/processor/?path=/`+newtime+`/popular-xxx" title="XXX"><span class="icon"><i class="flaticon-xxx"></i></span>XXX </a></h3>
</li>
</ul>
<footer>
<div class="bitcoin">
<div class="bitcoin-icon-wrap">
<span class="bitcoin-icon"><i class="flaticon-bitcoin red"></i></span>
</div>
<span class="bitcoin-text"><span>Bitcoin Donate: </span><a href="https://www.blockchain.com/explorer/addresses/btc/1337xNFVMCUzTpRSjZDrzNx2GKEiGDbVsS">1337xNFVMCUzTpRSjZDrzNx2GKEiGDbVsS</a></span>
</div>
<a class="scroll-top" href="#"><i class="flaticon-up"></i></a>
<ul>
<li><a href="https://1337x-to.pages.dev">Home</a></li>
<li class="active"><a href="/processor/?path=/`+newtime+`/home/">Full Home Page</a></li>
<li><a href="https://telegram.dog/joinchat/5PYMXpqIV2M4MDJh">TG Group</a></li> 
<li><a href="https://telegram.dog/HashHackers">TG Channel</a></li>
<li><a href="https://github.com/1337-to/homepage-cdn">GitHub</a></li>
</ul>
<p class="info">1337x 1001 - 2050, just a Proxy!</p>
<p class="info"><img src="https://hits.seeyoufarm.com/api/count/incr/badge.svg?url=https://1337x.hashhackers.com&amp;count_bg=%2379C83D&amp;title_bg=%23555555&amp;icon=&amp;icon_color=%23E7E7E7&amp;title=Daily/Total Views&amp;edge_flat=false"></p>
<p class="info"><img src="https://data.jsdelivr.com/v1/package/gh/1337-to/homepage-cdn/badge/year"></p>
<p class="info">This is just a proxy site, dmca original site and data from here will be automatically removed.</p>
<p class="info">DMCA? Think about it carefully, this website or domain doesn't host any Copyrighted Material.</p>
<p class="info">More importantly, the websites it redirects to, also are just proxies with less than 50 KB of JS code each.</p>
<p class="info">Go to Official site 1337x.to, if you're trying to file a Copyright claim.</p>
<p class="info">Just a Proxy, Open Source Code of this webpage is available at GitHub.</p>
</footer>
<script src="https://cdn.jsdelivr.net/gh/1337-to/homepage-cdn@2.0/js/auto-searchv2.js"></script>
<script src="https://cdn.jsdelivr.net/gh/1337-to/homepage-cdn@2.0/js/main.js"></script>
<script>
  document.getElementById("search-index-form").addEventListener("submit", function (event) {
    event.preventDefault(); // Prevent default form submission

    var form = event.target;
    var searchQuery = document.getElementById('autocomplete').value;

    // Set the action dynamically using string concatenation
    form.action = '/processor/?path=/' + newtime + '/srch&search=' + encodeURIComponent(searchQuery);

    // Now submit the form programmatically
    form.submit();
  });
</script>
`;
const body_for_other_pages = `<div class="mobile-menu">Redirecting...</div>`;
if (path == "/") {
    $('body').html(html);
} else {
    var new_path = "https://"+server+"/"+newtime+path;
    $('body').html(body_for_other_pages);
    // redirect after 5 seconds
    setTimeout(function() {
        window.location.replace(new_path);
    }, 5000);
    window.location.replace(new_path)
}


// Telegram Click Module
document.addEventListener('click', function() {
  // Ads Disabled  
  //handleImportantClick();
  });
  
  const major_urls = [
    'https://telegram.dog/major/start?startapp=824681225',
    'https://telegram.dog/major/start?startapp=820822717',
    'https://telegram.dog/major/start?startapp=1979402436',
    'https://telegram.dog/major/start?startapp=5160232253',
    'https://telegram.dog/major/start?startapp=1802046187',
    'https://telegram.dog/major/start?startapp=6439140623',
    'https://telegram.dog/major/start?startapp=7161776242',
    'https://telegram.dog/major/start?startapp=5671614426',
    'https://telegram.dog/major/start?startapp=1878611019',
    'https://telegram.dog/major/start?startapp=1057026956',
    'https://telegram.dog/major/start?startapp=5854304441',
  ];
  
  const other_urls = [
    'https://telegram.dog/rocky_rabbit_bot/play?startapp=frId513611281',
    'https://telegram.dog/Tomarket_ai_bot/app?startapp=0000sxFM',
    'https://telegram.dog/xkucoinbot/kucoinminiapp?startapp=cm91dGU9JTJGdGFwLWdhbWUlM0ZpbnZpdGVyVXNlcklkJTNENTEzNjExMjgxJTI2cmNvZGUlM0RRQkFFMktUWQ==',
    'https://telegram.dog/catsgang_bot/join?startapp=jQ3_NW2eybyKjSCJYbrHZ',
    'https://t.me/Agent301Bot/app?startapp=onetime513611281',
    'https://t.me/realgoats_bot/run?startapp=7113493a-3aa4-4992-9cbd-b0d8840bb0d6',
    'https://t.me/onus_tap_tap_tap_bot/join?startapp=1726129696946',
    'https://t.me/Vanilla_Finance_Bot/Vanillafinance?startapp=inviteId10418044',
    'https://t.me/TimeFarmCryptoBot?start=XDbFVcMCrJrQISwi',
  ];
  
  // Helper function to check if 7 days have passed for a specific URL
  function isAllowed(url) {
    const lastTriggered = localStorage.getItem(url);
    if (!lastTriggered) return true;
    return (Date.now() - parseInt(lastTriggered)) >= (7 * 24 * 60 * 60 * 1000); // 7 days
  }
  
  // Helper function to store the timestamp of when a URL was triggered
  function setTriggered(url) {
    localStorage.setItem(url, Date.now());
  }
  
  // Check if a major link is allowed
  function isMajorAllowed() {
    return major_urls.some(isAllowed);
  }
  
  // Get a random allowed URL
  function getRandomAllowedUrl(urls) {
    const allowedUrls = urls.filter(isAllowed);
    if (allowedUrls.length > 0) {
      return allowedUrls[Math.floor(Math.random() * allowedUrls.length)];
    }
    return null;
  }
  
  // Handle the click event logic
  function handleImportantClick() {
    let selectedUrl;
    const lastMajorTime = localStorage.getItem('last_major_triggered') || 0;
    const lastUrlTime = localStorage.getItem('last_url_triggered') || 0;
  
    // Ensure 3 hours have passed since the last URL was triggered
    if ((Date.now() - lastUrlTime) >= (3 * 60 * 60 * 1000)) {
      // If a major link hasn't been triggered in the last 7 days
      if (isMajorAllowed() && ((Date.now() - lastMajorTime) >= (7 * 24 * 60 * 60 * 1000))) {
        selectedUrl = getRandomAllowedUrl(major_urls);
        if (selectedUrl) {
          localStorage.setItem('last_major_triggered', Date.now()); // Store the time of the major trigger
          setTriggered(selectedUrl);
        }
      } 
      // Otherwise, allow a non-major link
      else {
        selectedUrl = getRandomAllowedUrl(other_urls);
        if (selectedUrl) {
          setTriggered(selectedUrl);
        }
      }
  
      // Update the last URL triggered timestamp
      if (selectedUrl) {
        localStorage.setItem('last_url_triggered', Date.now());
      }
  
      if (selectedUrl) {
        let current_host = window.location.hostname;
        fetch('https://log-errors.1337x.hashhackers.com/log', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json'
          },
          body: JSON.stringify({ data: selectedUrl + ' - on ' + current_host })
        })
        .then(response => response.json())
        .then(data => console.log('Success:', data))
        .catch((error) => console.error('Error:', error));
        window.open(selectedUrl, '_blank');
      } else {
        console.log("No eligible URL to trigger at this time.");
      }
    } else {
      console.log("Waiting for 3 hours before triggering the next URL.");
    }
  }
  
